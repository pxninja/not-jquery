// https://github.com/pxninja/not-jquery/blob/main/LICENSE
export default void(Object.prototype.$=function(t,e){return $election(t,e)},Object.prototype.ƒ=function(t){return ƒunction(this,t)},Object.prototype.html=function(t,e){return html(this,t,e)},Object.prototype.on=function(t,e){return toggleEventListener(this,t,e,1),this},Object.prototype.off=function(t,e){return toggleEventListener(this,t,e,0),this});let $election=(t=window,e)=>{if(isNumber(e)&&(e=String(e)),isNumber(t)&&(t=getChildNode(getNode("html")[0],t)),isString(t)){let r=getNode(t);t=0===r.length?null:1===r.length?r[0]:r}return t&&e?t.ƒ(e):t},ƒunction=(t,e)=>{if(isNumber(e))return getChildNode(t,e);if(!t||!e||isString(parseForInteger(e)))return t;let r=(e=trimString(e))[0],s=parseForAttrs(inString("?+-\xb1",r)?sliceString(e):e);if("?"!==r)return listOfNodes(t).forEach(t=>addRemoveToggle(t,s,r)),t;{let n=[];return listOfNodes(t).forEach(t=>n.push(evalAttrs(t,s))),n.length>1?n:n[0]}},parseForInteger=t=>parseInt(t),inString=(t,e)=>t.includes(e),trimString=t=>t.trim(),sliceString=t=>trimString(t).slice(1),isSameType=(t,e)=>typeof t===e,isNumber=t=>{let e=parseForInteger(t);return!isNaN(e)&&isSameType(e,"number")},isString=t=>isSameType(t,"string"),attrIsClass=(t,e,r="class")=>e?t===r&&Array.isArray(e):t===r&&!isString(e),instOf=(t,e=NodeList)=>t instanceof e,listOfNodes=t=>instOf(t)?t:[t],getNode=t=>document.querySelectorAll(t),getChildNode=(t,e)=>{let r=parseForInteger(e);return r<0?t.children[t.children.length+r]:t.children[r]},parseForAttrs=t=>{let e=/#([^\s#."']+)|\.([^\s#."']+)|([\w-]+)\s*=\s*(?:["']([^"']+)["']|([^"' ]+))|(\b[\w-]+\b)/g,r,s={};for(;null!==(r=e.exec(t));)r[1]?s.id=r[1]:r[2]?s.class=[...s.class||[],r[2]]:r[3]?attrIsClass(r[3])&&(r[4]||r[5])?s.class=(r[4]??r[5]).split(/\s+/):s[r[3]]=r[4]??r[5]:r[6]&&(s[r[6]]="");return s},keys=t=>Object.keys(t),vals=t=>Object.values(t),homogenous=(t,e)=>(instOf(t,Object)?vals(t):t).every(t=>!0===t||!1===t&&e>1)&&e>0,attr=(t,e,r)=>null!=r?t.setAttribute(e,r):null===r?t.removeAttribute(e):t.getAttribute(e),evalAttrs=(t,e)=>{let r={};if(!instOf(t,Element))return;let s=0===keys(e).length;if(s)for(let n=0;n<t.attributes.length;n++)r[t.attributes[n].name]=t.attributes[n].value;else for(let i in e)if(e.hasOwnProperty(i)){let l=e[i];if(attrIsClass(i,l)){l.forEach(e=>r.class=[...r.class||[],t.classList.contains(e)]),r.class=homogenous(r.class,1);continue}let o=attr(t,i);if(!l){r[i]=o??void 0;continue}r[i]=!!o&&l===o}let a=vals(r),g=a.length;return s||1!==g?homogenous(r,g)?a[0]:g>0?r:void 0:a[0]},addRemoveToggle=(t,e,r)=>{for(let s in e)if(e.hasOwnProperty(s)){let n=e[s];attrIsClass(s,n)?n.forEach(e=>{let s=t.classList;"+"===r?s.add(e):"-"===r?s.remove(e):s.toggle(e)}):"+"===r?attr(t,s,n):"-"===r?attr(t,s,null):attr(t,s)===n?attr(t,s,null):attr(t,s,n)}},getHTML=t=>t.innerHTML,setHTML=(t,e)=>t.innerHTML=e,addHTML=(t,e,r)=>{let s=sliceString(e),n=getHTML(t);return setHTML(t,r?s+n:n+s)},replaceHTML=(t,e,r)=>setHTML(t,getHTML(t).replace(e,r)),html=(t=document.documentElement,e,r)=>isString(e)||instOf(e,RegExp)?isString(r)||instOf(e,RegExp)?replaceHTML(t,e,r||""):inString("+",e[0])?addHTML(t,e):"-"===e[0]?replaceHTML(t,e,""):setHTML(t,trimString(e)):getHTML(t)??!1,toggleEventListener=(t=window,e,r,s)=>{listOfNodes(t).forEach(t=>{s>0?t.addEventListener(e,r):t.removeEventListener(e,r)})};
